<<<<<<< HEAD
=======
[README.md](https://github.com/user-attachments/files/22086635/README.md)
>>>>>>> e0628e40f446a2e97574cb1ad9e02f4dcc7c8d1f
# AI资讯采集系统

## 🎯 系统简介

AI资讯采集系统是一个自动化的资讯收集、处理和推送平台，支持从多个源（腾讯研究院AI速递、AIBase快讯）采集AI相关资讯，使用DeepSeek AI进行内容整合和改写，生成精美的日报和海报，并推送到金山文档群聊。

## ✨ 主要功能

### 📰 智能采集
- **腾讯研究院AI速递**：自动识别标题包含日期的AI速递文章（权重8分）
- **AIBase快讯**：批量采集指定日期的实时快讯（权重5分）
- **精确日期匹配**：支持按日期精准采集，避免重复内容

### 🤖 AI处理
- **智能筛选**：DeepSeek AI根据内容质量和来源权重自动筛选优质资讯
- **内容改写**：将原始资讯重新组织，生成结构化的AI日报
- **格式优化**：输出适合群聊展示的Markdown格式内容

### 🎨 海报生成
- **HTML模板**：现代化设计的海报模板，支持渐变背景和响应式布局
- **图片转换**：使用Playwright将HTML转换为高质量JPG图片
- **AI设计**：可选择让DeepSeek生成个性化的海报HTML模板

### 📲 多渠道推送
- **金山文档集成**：支持Markdown和图片格式推送到企业群聊
- **实时推送**：一键发送日报文字版或图文海报
- **推送状态**：实时反馈推送结果和状态

### 💻 可视化界面
- **响应式设计**：现代化的Web界面，支持PC和移动端
- **实时进度**：任务执行过程可视化，进度条和状态提示
- **内容预览**：采集内容、AI日报、海报图片在线预览
- **日志监控**：系统运行日志实时显示

## 🚀 快速开始

### 环境要求
- Python 3.8+
- Windows 10/11
- 互联网连接

### 一键启动
1. 双击 `start.bat` 文件
2. 系统会自动：
   - 创建虚拟环境
   - 安装依赖包
   - 启动Web服务
   - 打开浏览器界面

### 配置设置
1. 复制 `.env.example` 为 `.env`
2. 填入配置信息：
   ```env
   DEEPSEEK_API_KEY=sk-efa37b506d774cc7b447ac8fa4afd981
   KINGSOFT_WEBHOOK_URL=你的金山文档群聊机器人URL
   ```

## 📋 使用流程

### 1. 连接测试
- 点击顶部"连接测试"验证API和Webhook连接
- 绿色✅表示连接正常，红色❌表示需要检查配置

### 2. 资讯采集
- **选择日期**：默认为当天，可选择其他日期
- **选择来源**：腾讯研究院和AIBase，可单选或全选
- **开始采集**：点击"开始采集"按钮，等待进度完成
- **查看结果**：在"原始文章"标签页查看采集的内容

### 3. AI处理
- **生成日报**：点击"生成AI日报"，DeepSeek会智能筛选和改写内容
- **预览内容**：在"AI日报"标签页查看生成的日报，可复制内容
- **推送日报**：点击"推送日报"发送到金山文档群聊

### 4. 海报制作
- **生成海报**：点击"生成海报"，系统会创建精美的图片海报
- **预览海报**：在"海报预览"标签页查看效果，支持下载和查看大图
- **推送海报**：点击"推送海报"发送图文到群聊

### 5. 监控日志
- **系统日志**：在"系统日志"标签页查看详细的运行信息
- **实时状态**：任务进度和系统状态实时更新

## 🛠️ 高级配置

### 修改AI提示词
在 `config.py` 中的 `AI_PROMPT_TEMPLATE` 可以自定义DeepSeek的处理策略：
- 调整权重评分标准
- 修改输出格式要求
- 优化筛选条件

### 自定义海报样式
- 修改 `poster_gen.py` 中的HTML模板
- 调整CSS样式、颜色和布局
- 设置海报尺寸和质量参数

### 添加新的数据源
1. 创建新的爬虫类继承 `BaseScraper`
2. 实现 `get_article_list` 和 `get_article_detail` 方法
3. 在 `app.py` 中添加新的爬取逻辑

## 📁 项目结构

```
crawler2/
├── scrapers/              # 爬虫模块
│   ├── base_scraper.py   # 基础爬虫类
│   ├── sohu_scraper.py   # 腾讯研究院爬虫
│   └── aibase_news_scraper.py # AIBase爬虫
├── templates/             # HTML模板
│   └── index.html        # 主界面
├── static/               # 静态资源
├── cache/               # 缓存文件
├── exports/             # 导出文件
│   ├── reports/         # 日报文件
│   └── posters/         # 海报图片
├── app.py               # Flask主应用
├── config.py            # 配置文件
├── deepseek_api.py      # DeepSeek API集成
├── webhook.py           # 金山文档推送
├── poster_gen.py        # 海报生成
├── utils.py             # 工具函数
├── start.bat            # 启动脚本
└── requirements.txt     # 依赖包列表
```

## ⚠️ 注意事项

1. **API额度**：DeepSeek API有调用次数限制，请合理使用
2. **网络稳定**：爬虫功能依赖网络连接，建议在网络稳定环境下使用
3. **日期格式**：采集日期需要与实际发布日期匹配，腾讯研究院通常在标题中包含日期
4. **Webhook限制**：金山文档机器人可能有推送频率限制，避免频繁推送
5. **文件权限**：确保系统有读写cache和exports目录的权限

## 🔧 故障排除

### 爬虫无法获取内容
- 检查目标网站是否可正常访问
- 确认网站结构是否发生变化
- 查看系统日志获取详细错误信息

### DeepSeek API调用失败
- 验证API密钥是否正确
- 检查网络连接是否正常
- 确认API额度是否充足

### Webhook推送失败
- 验证Webhook URL是否有效
- 检查金山文档机器人是否正常工作
- 确认消息格式是否符合要求

### 海报生成失败
- 确认Playwright浏览器已安装
- 检查系统资源是否充足
- 查看HTML模板是否有语法错误

## 📞 技术支持

如果您在使用过程中遇到问题，请：

1. 查看系统日志获取错误详情
2. 检查配置文件是否正确
3. 确认网络连接和API服务状态
4. 尝试重启系统解决临时问题

---

**版本**: 1.0.0  
**更新时间**: 2024-08-29  
<<<<<<< HEAD
**适用环境**: Windows 10/11 + Python 3.8+
=======
**适用环境**: Windows 10/11 + Python 3.8+
>>>>>>> e0628e40f446a2e97574cb1ad9e02f4dcc7c8d1f
